# أوامر مراقبة الأداء 📊

<div dir="rtl">

## موارد النظام

### 1. مراقبة المعالج 💻

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `top` | عارض العمليات في الوقت الفعلي | `top` |
| `htop` | عارض العمليات التفاعلي | `htop` |
| `mpstat` | إحصائيات المعالج | `mpstat 1` |
| `uptime` | متوسط الحمل | `uptime` |
| `stress` | اختبار ضغط المعالج | `stress --cpu 4` |

### 2. مراقبة الذاكرة 🧠

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `free` | استخدام الذاكرة | `free -h` |
| `vmstat` | إحصائيات الذاكرة الافتراضية | `vmstat 1` |
| `pmap` | خريطة ذاكرة العملية | `pmap -x PID` |
| `smem` | تقارير الذاكرة | `smem -t` |
| `slabtop` | ذاكرة التخزين المؤقت للنواة | `slabtop` |

## أداء القرص

### 1. استخدام القرص 💽

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `df` | استخدام نظام الملفات | `df -h` |
| `du` | استخدام مساحة الدليل | `du -sh *` |
| `iostat` | إحصائيات الإدخال/الإخراج | `iostat -x 1` |
| `iotop` | مراقبة الإدخال/الإخراج | `iotop` |
| `fio` | قياس أداء الإدخال/الإخراج | `fio --name=test` |

### 2. إدارة القرص 🔧

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `hdparm` | معلمات القرص | `sudo hdparm -tT /dev/sda` |
| `smartctl` | مراقبة SMART | `sudo smartctl -a /dev/sda` |
| `badblocks` | فحص القطاعات التالفة | `sudo badblocks -v /dev/sda` |
| `fsck` | فحص نظام الملفات | `sudo fsck /dev/sda1` |
| `tune2fs` | ضبط نظام الملفات | `sudo tune2fs -l /dev/sda1` |

## أداء الشبكة

### 1. مراقبة الشبكة 🌐

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `iftop` | عرض النطاق الترددي | `sudo iftop -i eth0` |
| `nethogs` | استخدام النطاق لكل عملية | `sudo nethogs eth0` |
| `iperf3` | اختبار سرعة الشبكة | `iperf3 -s` |
| `nload` | حمل الشبكة | `nload eth0` |
| `bmon` | مراقب النطاق الترددي | `bmon` |

### 2. إحصائيات الشبكة 📈

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `netstat` | إحصائيات الشبكة | `netstat -tuln` |
| `ss` | إحصائيات المقابس | `ss -s` |
| `tcpdump` | محلل الحزم | `sudo tcpdump -i eth0` |
| `nmap` | ماسح الشبكة | `nmap localhost` |
| `mtr` | تشخيص الشبكة | `mtr google.com` |

## إدارة العمليات

### 1. مراقبة العمليات 🔄

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `ps` | حالة العمليات | `ps aux` |
| `pstree` | شجرة العمليات | `pstree -p` |
| `lsof` | عرض الملفات المفتوحة | `lsof -p PID` |
| `strace` | تتبع نداءات النظام | `strace command` |
| `ltrace` | تتبع نداءات المكتبة | `ltrace command` |

### 2. التحكم في العمليات ⚙️

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `nice` | تعيين أولوية العملية | `nice -n 10 command` |
| `renice` | تعديل الأولوية | `renice -n 10 -p PID` |
| `kill` | إنهاء العملية | `kill -15 PID` |
| `pkill` | إنهاء بالنمط | `pkill process_name` |
| `killall` | إنهاء بالاسم | `killall process_name` |

## أدوات مراقبة النظام

### 1. إحصائيات النظام 📊

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `sar` | نشاط النظام | `sar -u 1 5` |
| `dstat` | موارد النظام | `dstat` |
| `collectl` | بيانات الأداء | `collectl` |
| `nmon` | مراقب الأداء | `nmon` |
| `atop` | مراقب النظام والعمليات | `atop` |

### 2. مراقبة السجلات 📝

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `tail` | مراقبة ملفات السجل | `tail -f /var/log/syslog` |
| `journalctl` | سجل النظام | `journalctl -f` |
| `dmesg` | رسائل النواة | `dmesg -w` |
| `logwatch` | محلل السجلات | `logwatch` |
| `multitail` | عارض سجلات متعدد | `multitail /var/log/*` |

## أمثلة تطبيقية 🎯

### 1. فحص أداء النظام
```bash
# مراقبة المعالج والذاكرة
htop

# فحص الإدخال/الإخراج للقرص
iostat -x 1

# مراقبة الشبكة
iftop -i eth0

# عرض حمل النظام
uptime
```

### 2. تحليل استخدام الموارد
```bash
# تفاصيل استخدام الذاكرة
free -h
vmstat 1

# استخدام مساحة القرص
df -h
du -sh /* | sort -hr

# استخدام موارد العمليات
ps aux --sort=-%cpu | head
ps aux --sort=-%mem | head
```

### 3. اختبار الأداء
```bash
# اختبار ضغط المعالج
stress --cpu 4 --timeout 60s

# اختبار الإدخال/الإخراج للقرص
sudo fio --name=test --ioengine=libaio --direct=1 \
    --rw=randwrite --bs=4k --size=1G

# اختبار سرعة الشبكة
iperf3 -c server_ip
```

## تحسين الأداء 🔧

### 1. تحسين النظام
```bash
# ضبط التبديل
sudo sysctl vm.swappiness=10

# تعيين مجدول الإدخال/الإخراج
echo deadline > /sys/block/sda/queue/scheduler

# تحسين الشبكة
sudo sysctl -w net.ipv4.tcp_congestion_control=bbr
```

### 2. أولوية العمليات
```bash
# تشغيل بأولوية منخفضة
nice -n 19 command

# تغيير أولوية عملية قيد التشغيل
renice -n 19 -p PID
```

## أفضل الممارسات 📚

1. **مراقبة الموارد**
   - المراقبة المنتظمة
   - إعداد التنبيهات
   - الاحتفاظ بالبيانات التاريخية
   - تحديد الاتجاهات

2. **تحسين الأداء**
   - الصيانة المنتظمة
   - ضبط النظام
   - تخصيص الموارد
   - موازنة الحمل

3. **استكشاف الأخطاء وإصلاحها**
   - مقاييس خط الأساس
   - نهج منهجي
   - تحليل السبب الجذري
   - توثيق الحلول

4. **تخطيط السعة**
   - مراقبة النمو
   - توقع الاحتياجات
   - تخطيط الترقيات
   - اختبار التغييرات

## الخطوات التالية 🚀

- [برمجة الصدفة](../scripting/01-bash-basics.md)
- [إدارة النظام](../admin/01-system-admin.md)
- [الأداء المتقدم](../performance/01-advanced-tuning.md)
- [الأتمتة](../automation/01-automation-basics.md)

</div>
