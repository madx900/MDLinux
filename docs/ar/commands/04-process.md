# أوامر إدارة العمليات 🔄

<div dir="rtl">

## مراقبة العمليات

### 1. أوامر العمليات الأساسية 📊

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `ps` | عرض العمليات | `ps aux` |
| `top` | عارض العمليات المتحرك | `top` |
| `htop` | عارض العمليات التفاعلي | `htop` |
| `pgrep` | البحث عن العمليات بالاسم | `pgrep firefox` |
| `pidof` | البحث عن معرف العملية | `pidof nginx` |

### 2. معلومات العمليات 📋

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `ps aux` | قائمة العمليات المفصلة | `ps aux \| grep nginx` |
| `pstree` | شجرة العمليات | `pstree -p` |
| `lsof` | عرض الملفات المفتوحة | `lsof -p PID` |
| `strace` | تتبع نداءات النظام | `strace command` |
| `ltrace` | تتبع نداءات المكتبة | `ltrace command` |

## التحكم في العمليات

### 1. إدارة العمليات 🎮

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `kill` | إنهاء عملية | `kill -9 PID` |
| `killall` | إنهاء بالاسم | `killall firefox` |
| `pkill` | إنهاء بالنمط | `pkill -f pattern` |
| `renice` | تغيير الأولوية | `renice -n 10 -p PID` |
| `nohup` | تشغيل محصن من الانقطاع | `nohup command &` |

### 2. معالجة الإشارات 🚦

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `kill -l` | عرض الإشارات | `kill -l` |
| `kill -SIGTERM` | إنهاء متدرج | `kill -SIGTERM PID` |
| `kill -SIGKILL` | إنهاء قسري | `kill -SIGKILL PID` |
| `kill -SIGHUP` | إعادة تحميل الإعدادات | `kill -SIGHUP PID` |
| `kill -SIGSTOP` | إيقاف مؤقت للعملية | `kill -SIGSTOP PID` |

## إدارة الموارد

### 1. إدارة المعالج 💻

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `nice` | تشغيل بأولوية | `nice -n 10 command` |
| `cpulimit` | تحديد استخدام المعالج | `cpulimit -p PID -l 50` |
| `taskset` | تعيين ارتباط المعالج | `taskset -c 0 command` |
| `chrt` | تعيين سياسة الجدولة | `chrt -f -p 99 PID` |
| `stress` | اختبار ضغط المعالج | `stress --cpu 4` |

### 2. إدارة الذاكرة 🧠

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `free` | عرض استخدام الذاكرة | `free -h` |
| `vmstat` | إحصائيات الذاكرة الافتراضية | `vmstat 1` |
| `swapon` | تفعيل مساحة التبديل | `swapon /dev/sdb1` |
| `swapoff` | تعطيل مساحة التبديل | `swapoff /dev/sdb1` |
| `sync` | مزامنة مخازن القرص | `sync` |

## جدولة المهام

### 1. مهام Cron ⏰

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `crontab` | جدولة المهام | `crontab -e` |
| `at` | جدولة مهمة لمرة واحدة | `at now + 1 hour` |
| `batch` | جدولة للحمل المنخفض | `batch` |
| `anacron` | مجدول الأوامر الدورية | `anacron` |
| `systemd-run` | تشغيل كخدمة systemd | `systemd-run --on-calendar="*-*-* 02:00:00" command` |

### 2. التحكم في المهام 🎯

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `bg` | مهمة في الخلفية | `bg %1` |
| `fg` | مهمة في المقدمة | `fg %1` |
| `jobs` | عرض المهام | `jobs -l` |
| `disown` | فصل المهمة | `disown %1` |
| `wait` | انتظار المهمة | `wait PID` |

## خدمات النظام

### 1. إدارة الخدمات 🔧

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `systemctl` | التحكم في الخدمات | `systemctl start nginx` |
| `service` | تحكم الخدمة القديم | `service apache2 restart` |
| `chkconfig` | تحديث إعداد الخدمة | `chkconfig nginx on` |
| `update-rc.d` | إدارة نصوص التشغيل | `update-rc.d nginx defaults` |
| `rc-update` | مدير خدمة OpenRC | `rc-update add nginx default` |

### 2. مراقبة الخدمات 📊

| الأمر | الوصف | مثال |
|-------|--------|-------|
| `systemctl status` | حالة الخدمة | `systemctl status nginx` |
| `journalctl` | عرض سجلات الخدمة | `journalctl -u nginx` |
| `dmesg` | رسائل النواة | `dmesg \| tail` |
| `uptime` | وقت تشغيل النظام | `uptime` |
| `w` | من المتصل | `w` |

## أمثلة تطبيقية 🎯

### 1. إدارة العمليات
```bash
# البحث عن عملية وإنهاؤها
pgrep firefox
kill -15 $(pgrep firefox)

# مراقبة عمليات النظام
top
htop
```

### 2. جدولة المهام
```bash
# جدولة نسخ احتياطي يومي
crontab -e
# أضف: 0 2 * * * /path/to/backup.sh

# جدولة مهمة لمرة واحدة
at now + 1 hour
> /path/to/script.sh
```

### 3. التحكم في الخدمات
```bash
# إدارة خدمة النظام
sudo systemctl start nginx
sudo systemctl enable nginx
sudo systemctl status nginx
```

## استكشاف الأخطاء وإصلاحها 🔧

### 1. استخدام المعالج المرتفع
```bash
# البحث عن العمليات كثيفة استخدام المعالج
top -o %CPU
ps aux --sort=-%cpu | head

# تحديد استخدام المعالج
cpulimit -p PID -l 50
```

### 2. مشاكل الذاكرة
```bash
# التحقق من استخدام الذاكرة
free -h
vmstat 1

# مسح ذاكرة التخزين المؤقت
sync; echo 3 > /proc/sys/vm/drop_caches
```

### 3. العمليات المعلقة
```bash
# البحث عن العمليات المعلقة
ps aux | grep D

# الإنهاء القسري إذا لزم الأمر
kill -9 PID
```

## أفضل الممارسات 📚

1. **إدارة العمليات**
   - استخدام SIGTERM قبل SIGKILL
   - مراقبة موارد النظام بانتظام
   - تعيين أولويات العمليات المناسبة
   - استخدام جدولة المهام للمهام الروتينية

2. **إدارة الخدمات**
   - الحفاظ على تحديث الخدمات
   - مراقبة سجلات الخدمة
   - تفعيل الخدمات الضرورية فقط
   - استخدام systemd للأنظمة الحديثة

3. **التحكم في الموارد**
   - تعيين حدود الموارد
   - مراقبة حمل النظام
   - استخدام الجدولة المناسبة
   - صيانة مساحة التبديل

## الخطوات التالية 🚀

- [معالجة النصوص](05-text-processing.md)
- [إدارة الحزم](06-package.md)
- [أوامر الأمان](07-security.md)
- [مراقبة الأداء](08-performance.md)

</div>
